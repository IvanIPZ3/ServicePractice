#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <windows.h>
#include <stdbool.h>
#include <math.h>

// Структура запису аккаунта користувача
struct Account {
    char name[50];
    char email[50];
    char password[50];
};

struct Music {
    char musicname[50];
    float longseconds;
}; // Структура даних про музику (довжина в секундах та ім'я)

void RegistringAccount() 
{
    struct Account a;

    char password2[50];

    fflush(stdin);  // Очищення вхідного буфера
    
    printf("\nВкажіть нікнейм: ");
    fgets(a.name, sizeof(a.name), stdin);
    a.name[strcspn(a.name, "\n")] = '\0';

    printf("\nВкажіть електронну пошту користувача: ");
    fgets(a.email, sizeof(a.email), stdin);
    a.email[strcspn(a.email, "\n")] = '\0';

    printf("\nВкажіть пароль: ");
    fgets(a.password, sizeof(a.password), stdin);
    a.password[strcspn(a.password, "\n")] = '\0';

    printf("\nПовторіть пароль: ");
    fgets(password2, sizeof(password2), stdin);
    password2[strcspn(password2, "\n")] = '\0';

    do {
        if (strcmp(a.password, password2) == 0) { // Перевірка пароля за допомогою strcmp()
            printf("Аккаунт зареєстровано\n");
        } else {
            printf("Паролі не збігаються\n");
            printf("\nВкажіть пароль: ");
            fgets(a.password, sizeof(a.password), stdin);

            printf("Повторіть пароль: ");
            fgets(password2, sizeof(password2), stdin);
        }
    } while (strcmp(a.password, password2) != 0);
}

void MusicList() { // функція відображення списку музики
    struct Music a;
    struct Music b;
    struct Music c;
    struct Music d;
    struct Music e;
    struct Music f;
    struct Music g;
    struct Music h;
    struct Music m;
    struct Music n;
    struct Music o;

    strcpy (a.musicname, "Kalush - Stefania");
    a.longseconds=179;
    strcpy (b.musicname, "Kalush - Додому");
    b.longseconds=216;
    strcpy (c.musicname, "Kalush - Файна");
    c.longseconds=156;
    strcpy (d.musicname, "Kalush feat. Tember Blanche - Калуські вечорниці");
    d.longseconds=180;
    strcpy (e.musicname, "Kalush - Зорі");
    e.longseconds=200;
    strcpy (f.musicname, "YAKTAK feat. Sobol' - Погляд");
    f.longseconds=177;
    strcpy (g.musicname, "Антитіла - Фортеця Бахмут");
    g.longseconds=199;
    strcpy (h.musicname, "SadSvit, СТРУКТУРА ЩАСТЯ - Силуети");
    h.longseconds=173;
    strcpy (m.musicname, "Без обмежень - Без неї ніяк");
    m.longseconds=282;
    strcpy (n.musicname, "alyona alyona - Не втратимо зв'язок");
    n.longseconds=149;
    strcpy (o.musicname, "SKOFKA - Чути гімн");
    o.longseconds=148;
    printf("Назва і автор пісні                                     Довжина пісні\n");
    printf("%s                                       %d:%d\n", a.musicname, a.longseconds/60, a.longseconds%60);
    printf("%s                                         %d:%d\n", b.musicname, b.longseconds/60, b.longseconds%60);
    printf("%s                                          %d:%d\n", c.musicname, c.longseconds/60, c.longseconds%60);
    printf("%s        %d:%d\n", d.musicname, d.longseconds/60, d.longseconds%60);
    printf("%s                                           %d:%d\n", e.musicname, e.longseconds/60, e.longseconds%60);
    printf("%s                            %d:%d\n", f.musicname, f.longseconds/60, f.longseconds%60);
    printf("%s                               %d:%d\n", g.musicname, g.longseconds/60, g.longseconds%60);
    printf("%s                      %d:%d\n", h.musicname, h.longseconds/60, h.longseconds%60);
    printf("%s                             %d:%d\n", m.musicname, m.longseconds/60, m.longseconds%60);
    printf("%s                     %d:%d\n", n.musicname, n.longseconds/60, n.longseconds%60);
    printf("%s                                      %d:%d\n", o.musicname, o.longseconds/60, o.longseconds%60);
}

int main() 
{
    SetConsoleCP(1251);
    SetConsoleOutputCP(1251);

    int choice = -1;

    do {
        printf("Меню:\n");
        printf("1) Створення аккаунта\n");
        printf("2) Виведення всієї інформації про підписку\n");
        printf("3) Пошук музики за назвою\n");
        printf("4) Поповнення рахунку\n");
        printf("5) Видалення аккаунта\n");
        printf("6) Вихід з програми\n");

        bool check = true;

    do{
        printf("Виберіть опцію: ");

        // Перевірка на коректне введення
        if (scanf("%d", &choice) != 1) {
            printf("\nПомилкове введення. Спробуйте знову\n");

            // Очищення буферу вводу
            while(getchar() != '\n');

            // Продовження циклу з нового кроку
            continue;
        }else{
            check = false;
        }

    } while (check);

        switch (choice) {
            case 1:
                RegistringAccount();
                break;
            case 2:
                // якась функція;
                break;
            case 3:
                // якась функція;
                break;
            case 4:
                // якась функція;
                break;
            case 5:
                // якась функція;
                break;
            case 6:
                printf("Програма завершена.\n");
                break;
            default:
                printf("Невірний вибір. Спробуйте ще раз.\n");
                break;
        }
    } while (choice != 6);

    return 0;
}
